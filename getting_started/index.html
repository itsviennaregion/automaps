
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Getting Started - autoMaps</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-automaps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="autoMaps" class="md-header__button md-logo" aria-label="autoMaps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            autoMaps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://gitlab.com/its-vienna-region/digilab/automaps" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitLab
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="autoMaps" class="md-nav__button md-logo" aria-label="autoMaps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    autoMaps
  </label>
  
    <div class="md-nav__source">
      <a href="https://gitlab.com/its-vienna-region/digilab/automaps" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitLab
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-demo-project" class="md-nav__link">
    Creating a demo project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploring-the-demo-project" class="md-nav__link">
    Exploring the demo project
  </a>
  
    <nav class="md-nav" aria-label="Exploring the demo project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geodata-demo_datagpkg-demo_projectqgz" class="md-nav__link">
    Geodata (demo_data.gpkg, demo_project.qgz)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-streamlit-configuration-streamlitconfigtoml" class="md-nav__link">
    The streamlit configuration (./streamlit/config.toml)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-main-configuration-automapsconfpy-automapsconf_polypy-dbpy" class="md-nav__link">
    The main configuration (automapsconf.py, automapsconf_poly.py, db.py)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-processing-configuration-generate_polypy" class="md-nav__link">
    The processing configuration (generate_poly.py)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-own-project" class="md-nav__link">
    Creating your own project
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/cli/" class="md-nav__link">
        Command Line Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/main_config/" class="md-nav__link">
        Main Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/streamlit_config/" class="md-nav__link">
        Streamlit Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/map_type/" class="md-nav__link">
        The MapType Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/ui_elements/" class="md-nav__link">
        User Interface Elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/map_generator/" class="md-nav__link">
        The MapGenerator Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-demo-project" class="md-nav__link">
    Creating a demo project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploring-the-demo-project" class="md-nav__link">
    Exploring the demo project
  </a>
  
    <nav class="md-nav" aria-label="Exploring the demo project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geodata-demo_datagpkg-demo_projectqgz" class="md-nav__link">
    Geodata (demo_data.gpkg, demo_project.qgz)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-streamlit-configuration-streamlitconfigtoml" class="md-nav__link">
    The streamlit configuration (./streamlit/config.toml)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-main-configuration-automapsconfpy-automapsconf_polypy-dbpy" class="md-nav__link">
    The main configuration (automapsconf.py, automapsconf_poly.py, db.py)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-processing-configuration-generate_polypy" class="md-nav__link">
    The processing configuration (generate_poly.py)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-your-own-project" class="md-nav__link">
    Creating your own project
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://gitlab.com/its-vienna-region/digilab/automaps/edit/master/docs/getting_started.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="getting-started-with-automaps">Getting Started with autoMaps<a class="headerlink" href="#getting-started-with-automaps" title="Permanent link">#</a></h1>
<p>Work through this tutorial to get your feets wet with autoMaps. </p>
<p>For further details on using autoMaps, please refer to the 
<a href="../user_guide/overview/">User Guide</a>.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only tested on Ubuntu 20.04!</p>
</div>
<p>autoMaps uses <a href="https://qgis.org/">QGIS</a>, a free and open source geographic information
system, to generate maps. Get it on the
<a href="https://qgis.org/en/site/forusers/download.html">QGIS downloads page</a> and install it
first. You probably should be familiar with QGIS and at least a little bit of <code>PyQGIS</code>
to get most out of autoMaps. Check out the
<a href="https://qgis.org/en/docs/index.html">QGIS documentation</a>, if necessary.</p>
<p>Then open your command line and clone the autoMaps repository:</p>
<div class="highlight"><pre><span></span><code>git clone https://gitlab.com/its-vienna-region/digilab/automatisierte-karten
</code></pre></div>
<p>Change into the cloned directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> automatisierte-karten
</code></pre></div>
<p>Install the <code>automaps</code> package <strong>for the Python interpreter used by QGIS</strong>, for 
example like this:
<div class="highlight"><pre><span></span><code>/usr/bin/python3 -m pip install .
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you are not sure, which Python interpreter is used by QGIS, open the QGIS GUI and
run the following commands in the Python console: </p>
<div class="highlight"><pre><span></span><code>import sys
sys.executable
</code></pre></div>
<p>This may return something like <code>/usr/bin/python3</code>. Use the path to this Python
interpreter in the command above.</p>
</div>
<h2 id="creating-a-demo-project">Creating a demo project<a class="headerlink" href="#creating-a-demo-project" title="Permanent link">#</a></h2>
<p>To get a feeling for the functionality and configuration of autoMaps you should first
create a demo project.</p>
<p>On the command line, <code>cd</code> into a directory where you want to place the demo project.
Then run the following command:
<div class="highlight"><pre><span></span><code>automaps init-demo
</code></pre></div></p>
<p>Then start the demo app by running the following command:
<div class="highlight"><pre><span></span><code>automaps run dev -c ./automaps-demo/automapsconf.py
</code></pre></div></p>
<p>Open up <code>http://127.0.0.1:8506/automaps-demo/</code> in your browser, and you'll see
the frontend of the demo project being displayed:
<img alt="Demo Frontend" src="../img/demo_frontend.png" /></p>
<p>Choose a district and a file format, click on <code>Create map</code> and then on <code>Download</code> to get
your first automatically generated map.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you encounter problems running the demo app, this might be because of a wrong
setting in <code>automaps-demo/automapsconf.py</code>. Try to change the option 
<code>QGIS_INSTALLATION_PATH</code> to the correct path for your system. The path can be 
determined by opening up the QGIS GUI and running <code>QgsApplication.prefixPath()</code> 
in the Python console.</p>
</div>
<h2 id="exploring-the-demo-project">Exploring the demo project<a class="headerlink" href="#exploring-the-demo-project" title="Permanent link">#</a></h2>
<p>The demo project consists of the following files:</p>
<p><img alt="Demo Files" src="../img/demo_files.png" />  </p>
<h3 id="geodata-demo_datagpkg-demo_projectqgz">Geodata (<code>demo_data.gpkg</code>, <code>demo_project.qgz</code>)<a class="headerlink" href="#geodata-demo_datagpkg-demo_projectqgz" title="Permanent link">#</a></h3>
<p>Let's take a look at the geodata first. It is stored in the 
<a href="https://www.geopackage.org/">GeoPackage</a> <code>demo_data.gpkg</code> and used in the 
<a href="https://qgis.org">QGIS</a> project <code>demo_project.qgz</code>. Open the <code>qgz</code> file with QGIS
and explore it. You'll discover, that it consists of only a few main elements.</p>
<p>It has two layers: </p>
<p><img alt="Demo layers" src="../img/demo_layers.png" /></p>
<ul>
<li><strong>districts</strong>: a polygon layer holding the geometries and some attributes of the 23
 districts of Vienna, Austria. The attribute <code>NAMEK</code> is used to provide the options
 for the frontend's drop down menu called <code>District name</code>. During the map 
 creation process, the <strong>districts</strong> layer is filtered to only show the selected
 district.</li>
<li><strong>OpenStreetMap</strong>: used as basemap.</li>
</ul>
<p>The project also consists of a print layout called <strong>poly</strong>, which has three elements:</p>
<p><img alt="Demo print layout" src="../img/demo_print_layout.png" /></p>
<ul>
<li>The main map, called <code>Map 1</code>. During the map creation process, the map view
is updated to zoom to the selected district.</li>
<li>A label with the content <code>[% map_get(@data, 'District name') %]</code>. During the
map creation process, it is updated to hold the selected value of the drop down menu
called <code>District name</code>.</li>
<li>Another label holding the data source information. This is just some static text.</li>
</ul>
<h3 id="the-streamlit-configuration-streamlitconfigtoml">The streamlit configuration (<code>./streamlit/config.toml</code>)<a class="headerlink" href="#the-streamlit-configuration-streamlitconfigtoml" title="Permanent link">#</a></h3>
<p>autoMaps uses <a href="https://streamlit.io/">Streamlit</a> as its frontend. Streamlit can be
configured using the <code>config.toml</code> file, as described in the 
<a href="https://docs.streamlit.io/library/advanced-features/configuration">docs</a>. In the case 
of our demo project, it looks like this:
<div class="highlight"><pre><span></span><code><span class="k">[server]</span><span class="w"></span>
<span class="na">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8506</span><span class="w"></span>
<span class="na">baseUrlPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;automaps-demo&quot;</span><span class="w"></span>
</code></pre></div></p>
<h3 id="the-main-configuration-automapsconfpy-automapsconf_polypy-dbpy">The main configuration (<code>automapsconf.py</code>, <code>automapsconf_poly.py</code>, <code>db.py</code>)<a class="headerlink" href="#the-main-configuration-automapsconfpy-automapsconf_polypy-dbpy" title="Permanent link">#</a></h3>
<p>The main configuration is defined in a Python file, which typically is called 
<code>automapsconf.py</code> and located in the same directory as <code>app.py</code>. For the demo project
this configuration is split into three files, two of them imported into the main file
<code>automapsconf.py</code>. This helps to keep everything clearly arranged and to store
database credentials in a dedicated file, which can be kept locally in version control
scenarios (e.g. by gitignoring it). This structure is recommended as best practice for
your own projects. For more information take a look at the
<a href="../user_guide/main_config/">User Guide</a>.</p>
<p><code>automapsconf.py</code> requires some mandatory config options and supports a list of optional
config options. At this point, we will focus only on two of them, <code>db</code> and
<code>MAPTYPES_AVAIL</code>:</p>
<p>The configuration option <code>db</code> is necessary to connect to your project's (geo)database
and thus to present the available options in the frontend (like the values of the
drop down menu <code>District name</code>). It has to be a dictionary which can be converted
to an <a href="https://docs.sqlalchemy.org/en/14/core/engines.html#sqlalchemy.engine.URL">SQLAlchemy <code>URL</code> object</a>.
For the demo project, only <code>drivername</code> and <code>database</code> are set to point to the 
SQLite database which is part of the geopackage <code>demo_data.gpkg</code>:
<div class="highlight"><pre><span></span><code><span class="n">db</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;drivername&quot;</span><span class="p">:</span> <span class="s2">&quot;sqlite&quot;</span><span class="p">,</span>
    <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;demo_data.gpkg&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>The configuration option <code>MAPTYPES_AVAIL</code> is a list of <code>MapType</code> objects:
<div class="highlight"><pre><span></span><code><span class="n">MAPTYPES_AVAIL</span> <span class="o">=</span> <span class="p">[</span><span class="n">maptype_poly</span><span class="p">]</span>
</code></pre></div></p>
<p><code>MapType</code> objects serve as main autoMaps elements and help to structure your project. 
Each <code>MapType</code> is tied to one or more QGIS print layouts (which define the looks of the 
map) as well as to a single <code>MapGenerator</code> (which defines the processing steps). Take a
look at the code in <code>automapsconf_poly.py</code> which defines the <code>MapType</code> object 
<code>maptype_poly</code> and compare it with the UI elements of the demo project's frontend:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>

<span class="kn">from</span> <span class="nn">automaps.maptype</span> <span class="kn">import</span> <span class="n">MapType</span>
<span class="kn">from</span> <span class="nn">automaps.selector</span> <span class="kn">import</span> <span class="n">SelectorSimple</span><span class="p">,</span> <span class="n">SelectorSQL</span>
<span class="kn">from</span> <span class="nn">generate_poly</span> <span class="kn">import</span> <span class="n">MapGeneratorPoly</span>

<span class="n">maptype_poly</span> <span class="o">=</span> <span class="n">MapType</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Districts in Vienna&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Choose a district and get your map!&quot;</span><span class="p">,</span>
    <span class="n">ui_elements</span><span class="o">=</span><span class="p">[</span>
        <span class="n">SelectorSQL</span><span class="p">(</span>
            <span class="s2">&quot;District name&quot;</span><span class="p">,</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            select distinct NAMEK</span>
<span class="sd">            from districtborder</span>
<span class="sd">            order by NAMEK&quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">st</span><span class="o">.</span><span class="n">selectbox</span><span class="p">,</span>
            <span class="n">widget_args</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;help&quot;</span><span class="p">:</span> <span class="s2">&quot;Choose your district!&quot;</span>
            <span class="p">},</span>
            <span class="n">no_value_selected_text</span><span class="o">=</span><span class="s2">&quot;Choose district ...&quot;</span><span class="p">,</span>
        <span class="p">),</span>

        <span class="n">SelectorSimple</span><span class="p">(</span>
            <span class="s2">&quot;File Format&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span> <span class="s2">&quot;PNG&quot;</span><span class="p">,</span> <span class="s2">&quot;SVG&quot;</span><span class="p">],</span>
            <span class="n">st</span><span class="o">.</span><span class="n">radio</span><span class="p">,</span>
            <span class="n">exclude_from_filename</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">use_for_file_format</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">print_layout</span><span class="o">=</span><span class="s2">&quot;poly&quot;</span><span class="p">,</span>
    <span class="n">map_generator</span><span class="o">=</span><span class="n">MapGeneratorPoly</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></p>
<p>You can see that the main part of the object initialization is the list passed to 
the <code>ui_elements</code> argument. It holds two <code>Selector</code> objects, which define the available
options in the frontend and serve as connection to the backend, passing the selected
values as a dictionary called <code>data</code> to the processing machinery. Check the "Debug" 
box in the frontend to see a representation of the <code>data</code> object:</p>
<p><img alt="Demo Debug" src="../img/demo_debug.png" /></p>
<h3 id="the-processing-configuration-generate_polypy">The processing configuration (<code>generate_poly.py</code>)<a class="headerlink" href="#the-processing-configuration-generate_polypy" title="Permanent link">#</a></h3>
<p>The <code>data</code> dictionary is consumed by <code>MapGeneratorPoly</code>, a class of type <code>MapGenerator</code>,
defined in <code>generate_poly.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="kn">from</span> <span class="nn">automaps.generators.base</span> <span class="kn">import</span> <span class="n">MapGenerator</span><span class="p">,</span> <span class="n">Step</span>


<span class="k">class</span> <span class="nc">MapGeneratorPoly</span><span class="p">(</span><span class="n">MapGenerator</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Districts in Vienna&quot;</span>

    <span class="k">def</span> <span class="nf">_set_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steps</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;Initialize project&quot;</span><span class="p">:</span> <span class="n">Step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_project</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="s2">&quot;Filter layers&quot;</span><span class="p">:</span> <span class="n">Step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_layers</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="s2">&quot;Zoom to extent&quot;</span><span class="p">:</span> <span class="n">Step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_extent</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="s2">&quot;Export map&quot;</span><span class="p">:</span> <span class="n">Step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_layout</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">init_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_layers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_project_variable</span><span class="p">(</span>
            <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_map_layer_visibility</span><span class="p">(</span><span class="s2">&quot;districts&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_map_layer_visibility</span><span class="p">(</span><span class="s2">&quot;OpenStreetMap&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">filter_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_map_layer_filter_expression</span><span class="p">(</span>
                <span class="s2">&quot;districts&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;NAMEK = &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;District name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom_map_to_layer_extent</span><span class="p">(</span>
            <span class="s2">&quot;Map 1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_map_layer</span><span class="p">(</span><span class="s2">&quot;districts&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">export_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_export_print_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_data</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_data</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;./poly_out.qgz&quot;</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_data</span><span class="o">.</span><span class="n">project</span>
</code></pre></div>
<p>The <code>MapGenerator</code> defines the processing steps which are required to generate the
desired map, based on (1) the user selected options (stored in the <code>self.data</code> 
property), and (2) on the layers, stylings, print layouts etc. in the QGIS project.</p>
<p>Each <code>MapGenerator</code> consists of at least one, but possibly dozens of processing steps. 
The demo project's <code>MapGeneratorPoly</code> consists of four. They are declared in the 
<code>_set_steps()</code> method and defined in the other corresponding methods. How to structure 
your <code>MapGenerator</code> depends on your use case. Just take notice, that the progress of a 
processing task is visualized in the frontend as a progress bar. You can call your 
methods however you want.</p>
<p>So what happens here?</p>
<ul>
<li><code>init_project()</code> initializes all map layers, making them invisible and removing all
filter conditions. It copies the <code>self.data</code> dictionary as project variable into the 
QGIS project and then turns on the required layers.</li>
<li><code>filter_layers()</code> takes the user selected value of the <code>Selector</code> labeled
<code>District name</code> (the drop down menu) to set a filter expression for the <code>districts</code>
layer.</li>
<li><code>set_extent()</code> zooms <code>Map 1</code> of our print layout <code>poly</code> to the now filtered extent
of the <code>districts</code> layer.</li>
<li><code>export_layout()</code> finally exports the created map in the desired file format (PDF, PNG
or SVG). It also writes the specific QGIS project file to the defined location, which
can be handy for debugging your own autoMaps projects. Take a look at <code>poly_out.qgz</code> in
QGIS, inspect the filter expressions and the <code>poly</code> print layout!</li>
</ul>
<p>The step methods use various helper methods, inherited from the <code>MapGenerator</code> base 
class, such as <code>_set_map_layer_visibility()</code> or <code>_export_print_layout()</code>. Take a look
at the <a href="../user_guide/map_generator/"><code>User Guide</code></a> for a list of these helper
methods. You don't have to use them in your own projects, you could directly go for
the respective <code>PyQGIS</code>-calls instead. But they save you a lof of typing for the most
common tasks.</p>
<p>After running through all processing steps, the download button shows up on the 
frontend and the map is ready to be used.</p>
<p>Feel free to play around with the demo project to get better acquainted with the overall
structure of an autoMaps project.</p>
<p>For further details on using autoMaps, please refer to the 
<a href="../user_guide/overview/">User Guide</a>!</p>
<h2 id="creating-your-own-project">Creating your own project<a class="headerlink" href="#creating-your-own-project" title="Permanent link">#</a></h2>
<p>You can now go back to the command line and create your first autoMaps project from
scratch. Run the following command:</p>
<div class="highlight"><pre><span></span><code>automaps init-project PROJECT_NAME
</code></pre></div>
<p>Replace <code>PROJECT_NAME</code> with the desired name.</p>
<p>This will create a new directory with some stub files as starting point for your own
project. Maybe you like to start with editing <code>automapsconf.py</code> which includes some
hopefully helpful comments to get you started.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../user_guide/overview/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>